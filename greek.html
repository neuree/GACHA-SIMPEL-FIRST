<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mythology Gacha â€” Story Battle Spinner (Purple Edition)</title>
<style>
  :root{
    --bg:#1a1033;
    --card:#221344;
    --accent:#d290ff;
    --accent2:#b55aff;
    --muted:#c8b8e6;
    --glass: rgba(255,255,255,0.06);
  }

  *{
    box-sizing:border-box;
    font-family:Inter, ui-sans-serif, system-ui, -apple-system,"Segoe UI",Roboto;
  }

  body{
    margin:0;
    min-height:100vh;
    background:linear-gradient(180deg,#160b2c 0%, #1c1140 60%);
    color:#f5e8ff;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px;
  }

  .wrap{
    width:1000px;
    max-width:96vw;
    background:linear-gradient(180deg, rgba(255,255,255,0.04), transparent);
    border-radius:18px;
    padding:28px;
    box-shadow:0 10px 40px rgba(55,0,120,0.45);
  }

  header{
    display:flex;
    gap:18px;
    align-items:center;
    margin-bottom:14px;
  }

  .logo{
    width:72px;height:72px;
    border-radius:12px;
    background:linear-gradient(135deg,var(--accent),var(--accent2));
    display:flex;align-items:center;justify-content:center;
    font-weight:900; font-size:23px; color:#2b0d47;
  }

  h1{ margin:0; font-size:22px; }
  p.lead{ margin:0; color:var(--muted); font-size:14px; }

  .controls{
    display:flex;
    gap:18px;
    margin-top:20px;
    flex-wrap:wrap;
    align-items:center;
  }

  .options{
    display:flex;
    gap:12px;
    background:var(--glass);
    padding:12px;
    border-radius:12px;
  }

  .option{
    display:flex;
    gap:6px;
    align-items:center;
    cursor:pointer;
  }
  .option input{ accent-color:var(--accent); }

  .btns{ margin-left:auto; display:flex; gap:10px; }

  button.btn{
    padding:10px 18px;
    font-size:15px;
    font-weight:600;
    border-radius:10px;
    cursor:pointer;
    border:1px solid rgba(255,255,255,0.08);
    background:linear-gradient(180deg,#2c1b59,#1c1140);
    color:white;
  }

  button.primary{
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    color:#2b0d47;
    border:none;
    box-shadow:0 8px 30px rgba(182,120,255,0.25);
  }

  .stage{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:14px;
    margin-top:20px;
  }

  .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.04), transparent);
    border-radius:14px;
    padding:20px;
    min-height:160px;
    text-align:center;
    border:1px solid rgba(255,255,255,0.05);
    display:flex;
    flex-direction:column;
    justify-content:center;
  }

  .card.hidden{ opacity:0.28; transform:scale(.97); }

  .card h3{ margin:0 0 10px; font-size:17px; }
  .result{
    font-size:26px;
    font-weight:800;
    margin-top:6px;
    color:var(--accent);
    letter-spacing:0.6px;
  }

  .spinAnim{
    animation:spin 1.2s cubic-bezier(.2,.9,.2,1);
    display:inline-block;
  }

  @keyframes spin{
    0%{transform:rotateX(0) scale(1);}
    50%{transform:rotateX(180deg) scale(1.07);}
    100%{transform:rotateX(360deg) scale(1);}
  }

  .results-row{
    margin-top:14px;
    text-align:center;
    color:var(--muted);
    font-size:13px;
    display:none;
  }

  footer{
    margin-top:20px;
    display:flex;
    justify-content:space-between;
    color:var(--muted);
    font-size:12px;
  }

  .confetti-canvas{
    position:fixed;
    left:0; top:0; width:100%; height:100%;
    pointer-events:none;
    z-index:50;
  }

  @media(max-width:900px){
    .stage{ grid-template-columns:1fr; }
    .btns{ margin-left:0; width:100%; justify-content:space-between; }
  }
</style>
</head>
<body>

<div class="wrap">

<header>
  <div class="logo">MYTH</div>
  <div>
    <h1>Mythology Gacha â€” Purple Story Spinner</h1>
    <p class="lead">Gacha Monster + Hero + Setting + Required Word untuk tantangan cerita 20 detik.</p>
  </div>
</header>

<div class="controls">
  <div class="options">
    <label class="option"><input id="optMonster" type="checkbox" checked> Monster</label>
    <label class="option"><input id="optHero" type="checkbox" checked> Hero</label>
    <label class="option"><input id="optSetting" type="checkbox" checked> Setting</label>
    <label class="option"><input id="optWord" type="checkbox" checked> Required Word</label>
  </div>

  <div class="btns">
    <button id="btnDraw" class="btn primary">ðŸŽ² GACHA!</button>
    <button id="btnReset" class="btn">Reset</button>
  </div>
</div>

<div class="stage">

  <div class="card" id="cardMonster">
    <h3>Monster</h3>
    <div class="result" id="resMonster">â€”</div>
  </div>

  <div class="card" id="cardHero">
    <h3>Hero</h3>
    <div class="result" id="resHero">â€”</div>
  </div>

  <div class="card" id="cardSetting">
    <h3>Setting</h3>
    <div class="result" id="resSetting">â€”</div>
  </div>

  <div class="card" id="cardWord">
    <h3>Required Word</h3>
    <div class="result" id="resWord">â€”</div>
  </div>

</div>

<div id="noteRow" class="results-row">
  Gunakan keempat elemen ini â†’ Buat cerita 20 detik â†’ Voting: Most Creative, Funniest, Most Chaotic!
</div>

<footer>
  <div>English Club â€“ Mythology Night</div>
  <div>Have fun spinning!</div>
</footer>

</div>

<canvas id="confetti" class="confetti-canvas"></canvas>

<script>
// Pools â€” UPDATED with famous options
const POOLS = {
  Monster: [
    "Dragon", "Kraken", "Hydra", "Fenrir", "Minotaur",
    "Cerberus", "Medusa", "Cyclops", "Basilisk", "Chimera"
  ],
  Hero: [
    "Hercules", "Zeus", "Mulan", "Perseus", "Achilles",
    "Thor", "Loki", "Athena", "Hades", "Sun Wukong"
  ],
  Setting: [
    "Volcano", "Sky Palace", "Frozen Sea", "Ancient Temple",
    "Underworld", "Magic Forest", "Stormy Mountain",
    "Floating Island", "Abandoned Castle", "Moonlit Lake"
  ],
  Word: [
    "Destiny", "Chaos", "Prophecy", "Curse",
    "Rebirth", "Sacrifice", "Portal", "Forbidden Power",
    "Ancient Seal", "Lost Crown"
  ]
};

const opts = {
  Monster: document.getElementById("optMonster"),
  Hero: document.getElementById("optHero"),
  Setting: document.getElementById("optSetting"),
  Word: document.getElementById("optWord")
};

const results = {
  Monster: document.getElementById("resMonster"),
  Hero: document.getElementById("resHero"),
  Setting: document.getElementById("resSetting"),
  Word: document.getElementById("resWord")
};

const cards = {
  Monster: document.getElementById("cardMonster"),
  Hero: document.getElementById("cardHero"),
  Setting: document.getElementById("cardSetting"),
  Word: document.getElementById("cardWord")
};

const btnDraw = document.getElementById("btnDraw");
const btnReset = document.getElementById("btnReset");
const noteRow = document.getElementById("noteRow");

// Confetti setup
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
let pieces = [];

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

function randomPick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

function reveal(key, delay){
  const card = cards[key];
  const el = results[key];
  const pick = randomPick(POOLS[key]);

  card.classList.remove("hidden");
  el.textContent = "...";
  el.classList.add("spinAnim");

  setTimeout(()=>{
    el.textContent = pick;
    el.classList.remove("spinAnim");
  }, delay + 900);
}

function startConfetti(){
  pieces = [];
  for(let i=0;i<80;i++){
    pieces.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height - canvas.height,
      dx: -2 + Math.random()*4,
      dy: 2 + Math.random()*5,
      r: 6 + Math.random()*6,
      rot: Math.random()*360
    });
  }
  animateConfetti();
  setTimeout(()=> pieces = [], 3500);
}

function animateConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  pieces.forEach(p=>{
    p.x += p.dx;
    p.y += p.dy;
    p.rot += 0.05;

    ctx.save();
    ctx.translate(p.x,p.y);
    ctx.rotate(p.rot);
    ctx.fillStyle = `hsl(${Math.random()*360} 70% 70%)`;
    ctx.fillRect(-p.r/2,-p.r/2,p.r,p.r*0.6);
    ctx.restore();
  });
  if(pieces.length>0) requestAnimationFrame(animateConfetti);
}

btnDraw.addEventListener("click", async ()=>{
  btnDraw.disabled = true;
  btnDraw.textContent = "Drawingâ€¦";
  noteRow.style.display = "none";

  // Dim hidden cards
  ["Monster","Hero","Setting","Word"].forEach(k=>{
    cards[k].classList.toggle("hidden", !opts[k].checked);
  });

  await new Promise(r=>setTimeout(r,500));

  const order = ["Monster","Hero","Setting","Word"].filter(k=>opts[k].checked);
  
  order.forEach((k,i)=> reveal(k, i*600));

  setTimeout(()=>{
    startConfetti();
    noteRow.style.display = "block";
    btnDraw.disabled = false;
    btnDraw.textContent = "ðŸŽ² GACHA!";
  }, 1500 + order.length*300);
});

btnReset.addEventListener("click", ()=>{
  Object.values(results).forEach(r=> r.textContent="â€”");
  Object.values(cards).forEach(c=> c.classList.remove("hidden"));
  noteRow.style.display = "none";
});
</script>

</body>
</html>
